import{j as e}from"./index-CQ1qXSHc.js";import{r as s,j as C}from"./_virtual_one-entry-BGVki3MX.js";import{P as I,u as $,a as A,L as B,m as P}from"./proxy-BoETatpQ.js";import{M as H,u as T}from"./filter-props-HIScmK2q.js";class V extends s.Component{getSnapshotBeforeUpdate(o){const n=this.props.childRef.current;if(n&&o.isPresent&&!this.props.isPresent){const l=n.offsetParent,h=l instanceof HTMLElement&&l.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=h-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function W({children:r,isPresent:o,anchorX:n}){const l=s.useId(),h=s.useRef(null),a=s.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=s.useContext(H);return s.useInsertionEffect(()=>{const{width:v,height:i,top:g,left:c,right:f}=a.current;if(o||!h.current||!v||!i)return;const p=n==="left"?`left: ${c}`:`right: ${f}`;h.current.dataset.motionPopId=l;const u=document.createElement("style");return x&&(u.nonce=x),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${v}px !important;
            height: ${i}px !important;
            ${p}px !important;
            top: ${g}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[o]),C.jsx(V,{isPresent:o,childRef:h,sizeRef:a,children:s.cloneElement(r,{ref:h})})}const K=({children:r,initial:o,isPresent:n,onExitComplete:l,custom:h,presenceAffectsLayout:a,mode:x,anchorX:v})=>{const i=T(O),g=s.useId();let c=!0,f=s.useMemo(()=>(c=!1,{id:g,initial:o,isPresent:n,custom:h,onExitComplete:p=>{i.set(p,!0);for(const u of i.values())if(!u)return;l&&l()},register:p=>(i.set(p,!1),()=>i.delete(p))}),[n,i,l]);return a&&c&&(f={...f}),s.useMemo(()=>{i.forEach((p,u)=>i.set(u,!1))},[n]),s.useEffect(()=>{!n&&!i.size&&l&&l()},[n]),x==="popLayout"&&(r=C.jsx(W,{isPresent:n,anchorX:v,children:r})),C.jsx(I.Provider,{value:f,children:r})};function O(){return new Map}const N=r=>r.key||"";function L(r){const o=[];return s.Children.forEach(r,n=>{s.isValidElement(n)&&o.push(n)}),o}const F=({children:r,custom:o,initial:n=!0,onExitComplete:l,presenceAffectsLayout:h=!0,mode:a="sync",propagate:x=!1,anchorX:v="left"})=>{const[i,g]=$(x),c=s.useMemo(()=>L(r),[r]),f=x&&!i?[]:c.map(N),p=s.useRef(!0),u=s.useRef(c),w=T(()=>new Map),[k,t]=s.useState(c),[d,D]=s.useState(c);A(()=>{p.current=!1,u.current=c;for(let b=0;b<d.length;b++){const m=N(d[b]);f.includes(m)?w.delete(m):w.get(m)!==!0&&w.set(m,!1)}},[d,f.length,f.join("-")]);const E=[];if(c!==k){let b=[...c];for(let m=0;m<d.length;m++){const j=d[m],R=N(j);f.includes(R)||(b.splice(m,0,j),E.push(j))}return a==="wait"&&E.length&&(b=E),D(L(b)),t(c),null}const{forceRender:M}=s.useContext(B);return C.jsx(C.Fragment,{children:d.map(b=>{const m=N(b),j=x&&!i?!1:c===d||f.includes(m),R=()=>{if(w.has(m))w.set(m,!0);else return;let S=!0;w.forEach(z=>{z||(S=!1)}),S&&(M==null||M(),D(u.current),x&&(g==null||g()),l&&l())};return C.jsx(K,{isPresent:j,initial:!p.current||n?void 0:!1,custom:o,presenceAffectsLayout:h,mode:a,onExitComplete:j?void 0:R,anchorX:v,children:b},m)})})},y=(...r)=>r.filter(Boolean).join(" ");function X(){const[r,o]=s.useState([]),[n,l]=s.useState(""),[h,a]=s.useState("all"),[x,v]=s.useState("personal"),[i,g]=s.useState("");s.useEffect(()=>{const t=localStorage.getItem("todos");t&&o(JSON.parse(t))},[]),s.useEffect(()=>{localStorage.setItem("todos",JSON.stringify(r))},[r]);const c=()=>{if(n.trim()!==""){const t={id:Date.now().toString(),text:n,completed:!1,category:x,dueDate:i||void 0};o([...r,t]),l(""),g("")}},f=t=>{o(r.map(d=>d.id===t?{...d,completed:!d.completed}:d))},p=t=>{o(r.filter(d=>d.id!==t))},u=r.filter(t=>h==="completed"?t.completed:h==="active"?!t.completed:!0),w={hidden:{opacity:0,y:20},visible:t=>({opacity:1,y:0,transition:{delay:t*.05,duration:.3,ease:"easeOut"}}),exit:{opacity:0,x:-20,transition:{duration:.2}}},k=t=>{switch(t){case"personal":return"bg-earth-200 border-earth-400";case"community":return"bg-earth-100 border-earth-300";case"land":return"bg-forest-200 border-forest-400";case"education":return"bg-ocean-200 border-ocean-400";default:return"bg-gray-100 border-gray-300"}};return e.jsxs("div",{className:"max-w-xl mx-auto p-8 bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-earth-100 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 -mt-12 -mr-12 opacity-[0.05]",children:e.jsx("svg",{viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"var(--color-clay)",d:"M37.9,-65.7C48.7,-58.5,56.9,-47.6,64.4,-35.7C71.9,-23.8,78.9,-11.9,78.5,-0.2C78.1,11.4,70.4,22.8,62.7,34.1C55,45.4,47.2,56.6,36.7,63.9C26.2,71.2,13.1,74.5,-0.1,74.6C-13.2,74.8,-26.5,71.7,-37.2,64.5C-48,57.4,-56.3,46.3,-62.8,34.2C-69.3,22.1,-74,9.1,-74.2,-4.1C-74.4,-17.3,-70,-34.6,-60.2,-43.8C-50.4,-53,-35.1,-54.1,-22.9,-60.1C-10.7,-66.1,-1.4,-77.1,7.8,-78.1C17,-79.1,34,-73,37.9,-65.7Z",transform:"translate(100 100)"})})}),e.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 -mb-24 -ml-12 opacity-[0.05]",children:e.jsx("svg",{viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fill:"var(--color-amber-gold)",d:"M48.8,-75.3C63.9,-69.7,77.5,-58.6,84.4,-44.5C91.3,-30.4,91.5,-13.1,87.7,2.2C83.9,17.5,76.1,30.8,67.1,43.9C58.1,57,47.9,69.9,34.9,75.3C21.9,80.7,6.1,78.7,-8.3,74.3C-22.7,69.9,-35.7,63.2,-47.3,54.1C-59,45,-69.3,33.7,-75.1,19.5C-80.9,5.3,-82.2,-11.8,-76.6,-26.2C-71,-40.6,-58.6,-52.3,-44.8,-58.4C-31,-64.5,-15.5,-65,0.7,-66.1C16.9,-67.1,33.8,-68.8,48.8,-75.3Z",transform:"translate(100 100)"})})}),e.jsxs("h2",{className:"text-2xl font-serif font-semibold text-earth-800 mb-8 text-center relative",children:["Community Task Tracker",e.jsx("span",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-full text-earth-400 opacity-70 text-sm",children:"✦"})]}),e.jsxs("div",{className:"mb-8 space-y-4 relative",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:t=>l(t.target.value),placeholder:"Add a new task...",className:"flex-1 p-3 border border-earth-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-earth-300 bg-white/90 font-light placeholder:text-earth-400",onKeyPress:t=>t.key==="Enter"&&c()}),e.jsx("button",{onClick:c,className:"px-5 py-3 bg-earth-600 text-white rounded-lg hover:bg-earth-700 transition-all duration-300 transform hover:scale-105 font-medium shadow-sm",children:"Add"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsx("label",{className:"text-sm text-earth-600 block mb-1 font-medium",children:"Category:"}),e.jsxs("select",{value:x,onChange:t=>v(t.target.value),className:"w-full sm:w-auto p-2.5 border border-earth-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-earth-300 bg-white/90 appearance-none pr-8 relative",style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23a49080' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em"},children:[e.jsx("option",{value:"personal",children:"Personal"}),e.jsx("option",{value:"community",children:"Community"}),e.jsx("option",{value:"land",children:"Land"}),e.jsx("option",{value:"education",children:"Education"})]})]}),e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsx("label",{className:"text-sm text-earth-600 block mb-1 font-medium",children:"Due Date (optional):"}),e.jsx("input",{type:"date",value:i,onChange:t=>g(t.target.value),className:"w-full sm:w-auto p-2.5 border border-earth-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-earth-300 bg-white/90"})]})]})]}),e.jsxs("div",{className:"flex mb-6 space-x-3 border-b border-earth-100 pb-4",children:[e.jsx("button",{onClick:()=>a("all"),className:y("px-4 py-2 rounded-full transition-all duration-300 text-sm font-medium",h==="all"?"bg-earth-600 text-white shadow-sm":"bg-earth-50 text-earth-800 hover:bg-earth-100"),children:"All Tasks"}),e.jsx("button",{onClick:()=>a("active"),className:y("px-4 py-2 rounded-full transition-all duration-300 text-sm font-medium",h==="active"?"bg-earth-600 text-white shadow-sm":"bg-earth-50 text-earth-800 hover:bg-earth-100"),children:"Active"}),e.jsx("button",{onClick:()=>a("completed"),className:y("px-4 py-2 rounded-full transition-all duration-300 text-sm font-medium",h==="completed"?"bg-earth-600 text-white shadow-sm":"bg-earth-50 text-earth-800 hover:bg-earth-100"),children:"Completed"})]}),e.jsx("div",{className:"space-y-3",children:e.jsx(F,{children:u.length===0?e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-col items-center justify-center py-10 bg-earth-50/40 rounded-2xl border border-dashed border-earth-200",children:[e.jsx("div",{className:"w-16 h-16 mb-4 text-earth-400 opacity-60",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),e.jsx("p",{className:"text-center text-earth-600 font-serif text-lg",children:"No tasks to display"}),e.jsx("p",{className:"text-earth-500 text-sm mt-1",children:"Add a new task to get started"})]}):u.map((t,d)=>e.jsxs(P.div,{custom:d,initial:"hidden",animate:"visible",exit:"exit",variants:w,className:y("p-4 rounded-xl border-l-4 flex items-center justify-between gap-4 shadow-sm hover:shadow-md transition-all duration-300",k(t.category),t.completed?"opacity-60":""),style:{borderRadius:d%2===0?"0.75rem 0.5rem 0.75rem 0.5rem":"0.5rem 0.75rem 0.5rem 0.75rem"},children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"checkbox",checked:t.completed,onChange:()=>f(t.id),className:"h-5 w-5 rounded-full border-earth-300 text-earth-600 focus:ring-earth-500 cursor-pointer"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:y("font-medium text-earth-900 mb-1 transition-all duration-300",t.completed?"line-through text-earth-600":""),children:t.text}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[e.jsx("span",{className:"px-2.5 py-1 rounded-full bg-white/80 text-xs text-earth-600 font-medium backdrop-blur-sm",children:t.category}),t.dueDate&&e.jsxs("span",{className:"px-2.5 py-1 rounded-full bg-white/80 text-xs text-earth-600 font-medium backdrop-blur-sm",children:["Due: ",new Date(t.dueDate).toLocaleDateString()]})]})]})]}),e.jsx("button",{onClick:()=>p(t.id),className:"text-earth-400 hover:text-earth-700 p-1.5 rounded-full hover:bg-earth-100 transition-colors","aria-label":"Delete task",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},t.id))})}),u.length>0&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-earth-100 flex justify-between items-center text-sm text-earth-600",children:[e.jsxs("span",{children:[r.filter(t=>!t.completed).length," active tasks"]}),e.jsxs("span",{children:[r.filter(t=>t.completed).length," completed"]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("span",{className:"inline-block text-earth-400 opacity-40",children:"✧"})})]})}export{X as default};
